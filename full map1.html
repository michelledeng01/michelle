
<!DOCTYPE html>
<html>
  <head>
    <title>Simple styled maps</title>
      <style>
      html, body, #map {
        height: 100%;
        margin: 0px;
        padding: 0px;
      }
      </style>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script> <!--JQUERY SCRIPT -->
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script> <!--GOOGLE MAPS SCRIPT -->
    <script> 

      //START OF DRAW FUNCTION

      var draw = function(id, mapOptions, positions) {

      var map = new google.maps.Map(document.getElementById(id), mapOptions);

      var myLatlng = new google.maps.LatLng(40.7293, -73.9906);

      //set up some empty arrays to use
      var markers = [];
      var infoWindows = [];
      var popUps = [];

      //create all of the markers on the map
      for (i in positions) {

      // Adding a marker to the map
        markers[i] = new google.maps.Marker({
          position: positions[i].map,
          map: map,
          title: positions[i].title,
          icon: 'http://png-3.findicons.com/files/icons/480/weather/32/sunny.png' //url to images
          });

      }

       //loop through the markers, and add pop-up windows to them
       for (i in markers) {

      //create a template with two placeholder to replace
      var popUpTemplate = '<div class="content"><a href="{{link}}">{{content}}</a></div>';

      //replace the content placeholder
      popUps[i] = popUpTemplate.replace('{{content}}', positions[i].title);

      //replace the link placeholder
      popUps[i] = popUps[i].replace('{{link}}', positions[i].link);

      //create a new info window
      infoWindows[i] = new google.maps.InfoWindow({
      //the contents is the string-replaced template we created within this loop
      content:popUps[i]
      });

      //when a marker is clicked on
      google.maps.event.addListener(markers[i], 'click', function(innerKey) {
      return function() {
          //comment out the for loop persist each info window
          for (j in markers) {
            infoWindows[j].close(map, markers[j]);
          }

          //open the infoWindow related to the marker clicked on
          infoWindows[innerKey].open(map, markers[innerKey]);
      }
    }(i));
  }
} //end of the initiazlize function

    //END OF DRAW FUNCTION
</script>


 	<!--SOUND CLOUD STARTS HERE-->
  	<script type="text/javascript" src="http://connect.soundcloud.com/sdk.js"></script>
	<script>
	$(document).ready(function() {

        SC.initialize({
  		client_id: 'd58ccfcabb9df6603086be7f94396604'
  		});//closes SC.initialize
		SC.stream("/tracks/293", {
	  	autoPlay: true,
	  	ontimedcomments: function(comments){
	    //console.log(comments[0]);

	    var user_id = comments[0].user_id;
	    SC.get('/users/'+user_id, {"limit":1}, function(response){
	    	var city = response.city;
	    	//console.log(comments[0].body,city)

     $(document).ready(function () {

        $.getJSON("https://maps.googleapis.com/maps/api/geocode/json?address="+city+"&key=AIzaSyBcF_5owxQkfJi3gkZgzngaikp1zWq9hoY", function(response){

          var mapOptions = {
          zoom: 2,
          center: new google.maps.LatLng(40.7293, -73.9906) //centered at cooper, but zoomed to manhattan
          };
          var positions = [];

            for(var i=0; i<response.length; i++) {
              if(response[i].location != null) {
                var latitude = response.results[0].geometry.location.lat;
        	var longitude = response.results[0].geometry.location.lng;
console.log(latitude,longitude)
                positions.push(
                {
                  'title':'Hello World',
                  'map': new google.maps.LatLng(latitude, longitude),
                  'icon': 'http://png-3.findicons.com/files/icons/480/weather/32/sunny.png'
                });
              };
            };
          draw('map', mapOptions, positions);  

       }); //closes getJSON
             }); //closes readyfunction
	    })//closes SC.get response city
	  //closes ontimedcomments
	});//closes stream
	SC.stream("/tracks/293", function(sound){
		sound.play();
	  });
	});//closes readyfunction
	</script>

	<!--SOUND CLOUD ENDS-->

  	</head>
  	<body>
    <div id="map"></div>
  </body>
</html>

<!--objective: get comment users' city, tag it on the map real-time with music
	might need this site for geocoding cities: 

	https://developers.google.com/maps/documentation/geocoding/#Geocoding

	API KEY: AIzaSyBcF_5owxQkfJi3gkZgzngaikp1zWq9hoY

	for example: https://maps.googleapis.com/maps/api/geocode/json?address=Berlin&key=AIzaSyBcF_5owxQkfJi3gkZgzngaikp1zWq9hoY

	or this might be helpful: https://developers.google.com/maps/documentation/javascript/examples/geocoding-simple
-->

